# 共享工具模块

## 模块说明

本目录包含日本房产代币化平台的共享工具模块，为整个项目提供一致的工具函数和实用程序。

## 文件结构清理说明

为了提高代码质量和可维护性，我们对工具模块进行了清理和优化。主要变更包括：

1. **部署工具统一**：
   - 使用 `deployUtils.js` 作为主要的部署工具接口
   - 其他部署相关文件 (`deployment.js`, `deployment-core.js`, `deployer.js`) 将逐渐合并到主文件

2. **Ethers工具统一**：
   - 使用 `ethers-v6.js` 作为 Ethers.js v6 的工具函数封装
   - `ethers.js` 作为向后兼容的门面模块保留，但内部重定向到 v6 版本

3. **避免重复功能**：
   - 工具函数应按功能领域清晰划分
   - 尽量避免跨文件复制相似代码
   - 公共功能应提取到合适的模块中

## 主要工具模块

| 文件名 | 说明 |
|--------|------|
| `index.js` | 统一导出所有工具模块 |
| `logger.js` | 日志记录工具 |
| `web3Provider.js` | Web3 提供者和网络连接 |
| `contractService.js` | 合约服务接口 |
| `transaction.js` | 交易处理和执行 |
| `eventListener.js` | 事件监听和处理 |
| `deployUtils.js` | 合约部署工具（主要接口） |
| `getAbis.js` | ABI 管理工具 |
| `constants.js` | 系统常量定义 |
| `errors.js` | 错误处理工具 |
| `cache.js` | 缓存管理工具 |
| `paths.js` | 路径管理工具 |
| `validation.js` | 数据验证工具 |

## 维护指南

1. **添加新工具**：
   - 创建新文件时，使用清晰的命名反映其功能
   - 文件顶部添加注释说明模块用途
   - 在 `index.js` 中导出新模块

2. **修改现有工具**：
   - 尽量不要破坏现有接口，保持向后兼容
   - 如需重大变更，先创建新版本，并提供兼容层
   - 更新相关文档和测试

3. **代码风格**：
   - 遵循项目的代码规范
   - 为函数添加 JSDoc 注释
   - 使用明确的错误处理

4. **废弃旧功能**：
   - 不要直接删除公共接口，先标记为废弃
   - 提供替代方案和迁移路径
   - 在足够的过渡期后才移除废弃功能

## 注意事项

- 避免在工具模块中包含业务逻辑
- 确保工具函数具有良好的错误处理
- 保持向后兼容性，特别是核心接口 