# HTTP API服务器测试文档

本目录包含用于测试不动产系统HTTP API服务器的自动化测试脚本。

## 测试范围

测试覆盖以下关键功能：

1. **基础API功能**
   - 健康检查接口
   - API文档访问
   - API密钥鉴权

2. **角色管理**
   - 获取角色信息
   - 授予和撤销角色
   - 获取角色地址列表

3. **房产管理**
   - 注册新房产
   - 获取房产信息
   - 更新房产信息

4. **系统管理**
   - 获取系统状态
   - 紧急模式切换
   - 交易暂停切换

## 运行测试

### 运行所有测试

```bash
yarn test:all
```

这将启动服务器，运行所有测试，并在完成后关闭服务器。测试结果将保存在`logs`目录中。

### 运行特定功能的测试

```bash
# 运行基础API测试
yarn test:api

# 运行角色管理测试
yarn test:roles

# 运行系统管理测试
yarn test:system

# 运行房产管理测试
yarn test:property
```

## 测试辅助工具

`testHelper.js`文件包含以下辅助功能：

- 测试请求对象
- API密钥常量
- 测试数据（地址、房产信息等）
- 工具函数（API请求、鉴权测试等）

## 测试注意事项

1. 测试中使用的地址、房产ID等均为测试数据，确保它们与您的开发环境保持一致。
2. 某些测试可能会依赖于系统中已有的数据，如果没有适当的数据，测试可能会被跳过。
3. API密钥在测试中硬编码为`dev-api-key`，确保您的开发环境使用相同的API密钥。 